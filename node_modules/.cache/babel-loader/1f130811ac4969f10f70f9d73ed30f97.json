{"ast":null,"code":"var _jsxFileName = \"D:\\\\STUDIES\\\\N4_K2_L\\u1EACP TR\\xCCNH N\\xC2NG CAO\\\\land-project-react\\\\src\\\\sites\\\\admin\\\\containers\\\\news\\\\create-update-news.js\";\nimport React from 'react';\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport Slide from '@material-ui/core/Slide';\nimport Grid from '@material-ui/core/Grid';\nimport { withStyles } from '@material-ui/core/styles';\nimport { connect } from 'react-redux'; //UI\n\nimport { ValidatorForm, TextValidator, SelectValidator } from 'react-material-ui-form-validator';\nimport TextField from '@material-ui/core/TextField';\nimport { ToastContainer, toast } from 'react-toastify';\nimport CKEditor from '@ckeditor/ckeditor5-react';\nimport ClassicEditor from '@ckeditor/ckeditor5-build-classic';\nimport MenuItem from '@material-ui/core/MenuItem'; //Component\n//data-access\n\nimport newsProvider from '../../../../data-access/news-provider';\nimport imageProvider from '../../../../data-access/image-provider';\nimport newCategoryProvider from '../../../../data-access/new-category-provider';\nimport clientUtils from '../../../../utils/client-utils';\nimport axios from 'axios';\nconst resource_url = \"https://localhost:44334\";\nconst Transition = React.forwardRef(function Transition(props, ref) {\n  return React.createElement(Slide, Object.assign({\n    direction: \"up\",\n    ref: ref\n  }, props, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 32\n    },\n    __self: this\n  }));\n}); // const editorConfiguration = {\n//     plugins: [ Essentials, Bold, Italic, Paragraph ],\n//     toolbar: [ 'bold', 'italic' ]\n// };\n\nClassicEditor.create(document.querySelector('#editor'), {\n  cloudServices: {\n    tokenUrl: 'https://https://44400.cke-cs.com/token/dev/qb1umxws7wvNH1vbCmKc6UXy5etgSgzec10oHS4Y3LHkdZBkpAgZXIl8riuT.com/cs-token-endpoint',\n    uploadUrl: 'https://44400.cke-cs.com/easyimage/upload/'\n  }\n}).then(console.log(\"hello\")).catch(e => console.log(e));\n\nclass ModalAddUpdate extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.handleImageChange = e => {\n      this.setState({\n        image: e.target.files[0],\n        imageName: e.target.files[0].name,\n        imageFake: URL.createObjectURL(e.target.files[0])\n      });\n    };\n\n    this.handleClose = () => {\n      this.props.callbackOff();\n    };\n\n    this.create = () => {\n      const _this$state = this.state,\n            dataNew = _this$state.dataNew,\n            newName = _this$state.newName,\n            sortName = _this$state.sortName,\n            description = _this$state.description,\n            newBody = _this$state.newBody,\n            count = _this$state.count,\n            newTag = _this$state.newTag,\n            image = _this$state.image;\n      let id = dataNew ? dataNew.NewId : '';\n      let formData = new FormData();\n      formData.append(\"NewId\", this.state.dataNew.NewId);\n      formData.append('NewCategoryId', this.state.newCategory);\n      formData.append('NewName', this.state.newName);\n      formData.append('NewDescription', this.state.description);\n      formData.append('NewBody', this.state.newBody);\n      formData.append('Count', this.state.count);\n      formData.append('IsHotNew', this.state.isHotNew);\n      formData.append('NewTag', this.state.newTag);\n      formData.append('image', this.state.image);\n\n      if (dataNew && dataNew.NewId) {\n        axios({\n          url: \"https://localhost:44334/api/News/update\",\n          method: 'PUT',\n          data: formData,\n          headers: {\n            Accept: 'application/json',\n            'Content-Type': 'multipart/form-data' // 'Authorization': 'Basic YnJva2VyOmJyb2tlcl8xMjM='\n\n          }\n        }).then(res => {\n          console.log(res);\n\n          if (res.data.Code == 200) {\n            toast.success(\"Cập nhật tin tức thành công\", {\n              position: toast.POSITION.TOP_RIGHT\n            });\n            this.handleClose();\n          }\n        }).catch(e => {\n          toast.error(\"Cập nhật tin tức không thành công!\", {\n            position: toast.POSITION.TOP_RIGHT\n          });\n          this.handleClose();\n        });\n      } else {\n        axios({\n          url: \"https://localhost:44334/api/News/create\",\n          method: 'POST',\n          data: formData,\n          headers: {\n            Accept: 'application/json',\n            'Content-Type': 'multipart/form-data' // 'Authorization': 'Basic YnJva2VyOmJyb2tlcl8xMjM='\n\n          }\n        }).then(res => {\n          console.log(res);\n\n          if (res.data.Code == 200) {\n            toast.success(\"Tạo mới tin tức thành công\", {\n              position: toast.POSITION.TOP_RIGHT\n            });\n            this.handleClose();\n          }\n        }).catch(e => {\n          toast.error(\"Tạo mới tin tức không thành công!\", {\n            position: toast.POSITION.TOP_RIGHT\n          });\n          this.handleClose();\n        });\n      }\n    };\n\n    this.state = {\n      open: true,\n      dataNew: this.props.data,\n      newName: this.props.data && this.props.data.NewName ? this.props.data.NewName : '',\n      sortName: this.props.data && this.props.data.NewSortName ? this.props.data.NewSortName : '',\n      description: this.props.data && this.props.data.NewDescription ? this.props.data.NewDescription : '',\n      newBody: this.props.data && this.props.data.NewBody ? this.props.data.NewBody : '',\n      count: this.props.data && this.props.data.Count ? this.props.data.Count : 1,\n      isHotNew: this.props.data.IsHotNew && this.props.IsHotNew ? this.props.IsHotNew : true,\n      newTag: this.props.data && this.props.data.NewTag ? this.props.data.NewTag : null,\n      image: this.props.data && this.props.data.NewImage ? this.props.data.NewImage : ' ',\n      imageName: '',\n      newCategory: this.props.data && this.props.data.NewCategoryId ? this.props.data.NewCategoryId : '',\n      listCategory: [],\n      imagePreviewUrl: '',\n      imageFake: ''\n    };\n    this.data = JSON.stringify(this.props.data);\n    this.data2 = this.props.data;\n  }\n\n  componentDidMount() {\n    this.getNewCategory();\n  }\n\n  getNewCategory() {\n    newCategoryProvider.getAll().then(res => {\n      this.setState({\n        listCategory: res.Data\n      });\n    }).catch(e => {\n      console.log(e);\n    });\n  }\n\n  _handleImageChange(e) {\n    e.preventDefault(); // Assuming only image\n    // Assuming only image\n\n    this.setState({\n      image: URL.createObjectURL(e.target.files[0])\n    }); // Would see a path?\n    // TODO: concat files // Would see a path?\n    // TODO: concat files\n  }\n\n  render() {\n    console.log(this.props.data.NewImage);\n    const classes = this.props.classes;\n    const _this$state2 = this.state,\n          dataNew = _this$state2.dataNew,\n          newCategory = _this$state2.newCategory,\n          newName = _this$state2.newName,\n          sortName = _this$state2.sortName,\n          description = _this$state2.description,\n          newBody = _this$state2.newBody,\n          image = _this$state2.image,\n          count = _this$state2.count,\n          isHotNew = _this$state2.isHotNew,\n          newTag = _this$state2.newTag;\n    return React.createElement(Dialog, {\n      open: this.state.open,\n      TransitionComponent: Transition,\n      keepMounted: true,\n      onClose: this.handleClose,\n      fullWidth: \"md\",\n      maxWidth: \"md\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196\n      },\n      __self: this\n    }, React.createElement(ValidatorForm, {\n      onSubmit: this.create,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 203\n      },\n      __self: this\n    }, React.createElement(DialogTitle, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205\n      },\n      __self: this\n    }, \" \", this.props.data.NewId ? 'Cập nhật tin tức ' : 'Thêm mới tin tức'), React.createElement(DialogContent, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206\n      },\n      __self: this\n    }, React.createElement(Grid, {\n      container: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207\n      },\n      __self: this\n    }, React.createElement(Grid, {\n      item: true,\n      xs: 12,\n      md: 3,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208\n      },\n      __self: this\n    }, \"T\\xEAn tin t\\u1EE9c(*)\"), React.createElement(Grid, {\n      item: true,\n      xs: 12,\n      md: 9,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209\n      },\n      __self: this\n    }, React.createElement(TextValidator, {\n      value: newName,\n      placeholder: \"Nh\\u1EADp t\\xEAn tin t\\u1EE9c\",\n      className: classes.textField,\n      validators: [\"required\"],\n      errorMessages: ['Tên tin tức không được bỏ trống!'],\n      onChange: event => {\n        this.data2.newName = event.target.value;\n        this.setState({\n          newName: event.target.value\n        });\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 210\n      },\n      __self: this\n    })), React.createElement(Grid, {\n      item: true,\n      xs: 12,\n      md: 3,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 223\n      },\n      __self: this\n    }, \"Lo\\u1EA1i tin t\\u1EE9c(*)\"), React.createElement(Grid, {\n      item: true,\n      xs: 12,\n      md: 9,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 224\n      },\n      __self: this\n    }, React.createElement(SelectValidator, {\n      value: newCategory,\n      className: classes.textField,\n      validators: [\"required\"],\n      errorMessages: ['Loại tin tức không được bỏ trống!'],\n      onChange: event => {\n        this.data2.newCategory = event.target.value;\n        this.setState({\n          newCategory: event.target.value\n        });\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 225\n      },\n      __self: this\n    }, this.state.listCategory.map((item, index) => {\n      return React.createElement(MenuItem, {\n        key: index,\n        value: item.NewCategoryId,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 238\n        },\n        __self: this\n      }, item.NewCategoryName);\n    }))), React.createElement(Grid, {\n      item: true,\n      xs: 12,\n      md: 3,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 248\n      },\n      __self: this\n    }, \"H\\xECnh \\u1EA3nh(*)\"), React.createElement(Grid, {\n      item: true,\n      xs: 12,\n      md: 9,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 249\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      accept: \"image/png, image/jpeg\",\n      className: classes.input,\n      style: {\n        display: 'none'\n      },\n      placeholder: \"ch\\u1ECDn \\u1EA3nh\",\n      id: \"upload_logo_header\",\n      onChange: e => this.handleImageChange(e),\n      type: \"file\" // value={this.state.image}\n      ,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 250\n      },\n      __self: this\n    }), React.createElement(\"label\", {\n      htmlFor: \"upload_logo_header\",\n      style: {\n        marginLeft: '-3%'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 260\n      },\n      __self: this\n    }, React.createElement(Button, {\n      component: \"span\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 261\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      style: {\n        width: 30,\n        margin: 'auto',\n        border: \"1px soild\"\n      },\n      src: \"/image-icon.png\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 262\n      },\n      __self: this\n    }))), React.createElement(\"img\", {\n      style: {\n        width: 100,\n        height: 100\n      },\n      src: this.state.imageFake,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 269\n      },\n      __self: this\n    })), React.createElement(Grid, {\n      item: true,\n      xs: 12,\n      md: 3,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 273\n      },\n      __self: this\n    }, \"M\\xF4 t\\u1EA3\"), React.createElement(Grid, {\n      item: true,\n      xs: 12,\n      md: 9,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 274\n      },\n      __self: this\n    }, React.createElement(TextValidator, {\n      value: description,\n      placeholder: \"Nh\\u1EADp m\\xF4 t\\u1EA3\",\n      className: classes.textField,\n      onChange: event => {\n        this.data2.description = event.target.value;\n        this.setState({\n          description: event.target.value\n        });\n      },\n      validators: ['required'],\n      errorMessages: ['Mô tả không được để trống'],\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 275\n      },\n      __self: this\n    })), React.createElement(Grid, {\n      item: true,\n      xs: 12,\n      md: 3,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 288\n      },\n      __self: this\n    }, \"Tag\"), React.createElement(Grid, {\n      item: true,\n      xs: 12,\n      md: 9,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 289\n      },\n      __self: this\n    }, React.createElement(TextValidator, {\n      value: newTag,\n      placeholder: \"tag\",\n      className: classes.textField,\n      onChange: event => {\n        this.data2.newTag = event.target.value;\n        this.setState({\n          newTag: event.target.value\n        });\n      },\n      validators: ['required'],\n      errorMessages: ['Tag không được để trống'],\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 290\n      },\n      __self: this\n    })), React.createElement(Grid, {\n      item: true,\n      xs: 12,\n      md: 3,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 303\n      },\n      __self: this\n    }, \"N\\u1ED9i dung\"), React.createElement(Grid, {\n      item: true,\n      xs: 12,\n      md: 9,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 304\n      },\n      __self: this\n    }, React.createElement(CKEditor, {\n      data: newBody,\n      editor: ClassicEditor,\n      config: {\n        ckfinder: {\n          // Upload the images to the server using the CKFinder QuickUpload command.\n          // uploadUrl: 'https://44400.cke-cs.com/easyimage/upload/'\n          uploadUrl: 'https://localhost:44334/Uploads/'\n        }\n      },\n      onChange: (event, editor) => {\n        const data = editor.getData();\n        console.log({\n          event,\n          editor,\n          data\n        });\n        this.setState({\n          newBody: data\n        });\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 305\n      },\n      __self: this\n    })))), React.createElement(DialogActions, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 326\n      },\n      __self: this\n    }, React.createElement(Button, {\n      onClick: this.handleClose,\n      variant: \"contained\",\n      color: \"inherit\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 327\n      },\n      __self: this\n    }, \"Cancel\"), this.data != JSON.stringify(this.data2) ? React.createElement(Button, {\n      variant: \"contained\",\n      color: \"primary\",\n      type: \"submit\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 330\n      },\n      __self: this\n    }, \"Ok\") : React.createElement(Button, {\n      variant: \"contained\",\n      color: \"primary\",\n      disabled: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 331\n      },\n      __self: this\n    }, \"Ok\"))));\n  }\n\n}\n\nfunction mapStateToProps(state) {\n  return {\n    userApp: state.userApp\n  };\n}\n\nconst styles = theme => ({\n  row: {\n    display: 'flex',\n    justifyContent: 'center'\n  },\n  textField: {\n    width: '100%'\n  },\n  avatar: {\n    margin: 10\n  },\n  bigAvatar: {\n    width: 60,\n    height: 60\n  },\n  helpBlock: {\n    color: 'red'\n  },\n  textRight: {\n    float: 'right'\n  }\n});\n\nexport default withStyles(styles)(connect(mapStateToProps)(ModalAddUpdate));","map":{"version":3,"sources":["D:/STUDIES/N4_K2_LẬP TRÌNH NÂNG CAO/land-project-react/src/sites/admin/containers/news/create-update-news.js"],"names":["React","Button","Dialog","DialogActions","DialogContent","DialogContentText","DialogTitle","Slide","Grid","withStyles","connect","ValidatorForm","TextValidator","SelectValidator","TextField","ToastContainer","toast","CKEditor","ClassicEditor","MenuItem","newsProvider","imageProvider","newCategoryProvider","clientUtils","axios","resource_url","Transition","forwardRef","props","ref","create","document","querySelector","cloudServices","tokenUrl","uploadUrl","then","console","log","catch","e","ModalAddUpdate","Component","constructor","handleImageChange","setState","image","target","files","imageName","name","imageFake","URL","createObjectURL","handleClose","callbackOff","state","dataNew","newName","sortName","description","newBody","count","newTag","id","NewId","formData","FormData","append","newCategory","isHotNew","url","method","data","headers","Accept","res","Code","success","position","POSITION","TOP_RIGHT","error","open","NewName","NewSortName","NewDescription","NewBody","Count","IsHotNew","NewTag","NewImage","NewCategoryId","listCategory","imagePreviewUrl","JSON","stringify","data2","componentDidMount","getNewCategory","getAll","Data","_handleImageChange","preventDefault","render","classes","textField","event","value","map","item","index","NewCategoryName","input","display","marginLeft","width","margin","border","height","ckfinder","editor","getData","mapStateToProps","userApp","styles","theme","row","justifyContent","avatar","bigAvatar","helpBlock","color","textRight","float"],"mappings":"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","sourcesContent":["\r\nimport React from 'react'\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogContentText from '@material-ui/core/DialogContentText';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport Slide from '@material-ui/core/Slide';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport { connect } from 'react-redux';\r\n//UI\r\nimport { ValidatorForm, TextValidator, SelectValidator } from 'react-material-ui-form-validator';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport { ToastContainer, toast } from 'react-toastify';\r\nimport CKEditor from '@ckeditor/ckeditor5-react';\r\nimport ClassicEditor from '@ckeditor/ckeditor5-build-classic';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\n//Component\r\n\r\n//data-access\r\nimport newsProvider from '../../../../data-access/news-provider'\r\nimport imageProvider from '../../../../data-access/image-provider'\r\nimport newCategoryProvider from '../../../../data-access/new-category-provider'\r\n\r\nimport clientUtils from '../../../../utils/client-utils'\r\nimport axios from 'axios';\r\nconst resource_url = \"https://localhost:44334\"\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n    return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\n// const editorConfiguration = {\r\n//     plugins: [ Essentials, Bold, Italic, Paragraph ],\r\n//     toolbar: [ 'bold', 'italic' ]\r\n// };\r\nClassicEditor\r\n.create( document.querySelector( '#editor' ), {\r\n    cloudServices: {\r\n        tokenUrl: 'https://https://44400.cke-cs.com/token/dev/qb1umxws7wvNH1vbCmKc6UXy5etgSgzec10oHS4Y3LHkdZBkpAgZXIl8riuT.com/cs-token-endpoint',\r\n        uploadUrl: 'https://44400.cke-cs.com/easyimage/upload/'\r\n    }\r\n} )\r\n.then( console.log(\"hello\"))\r\n.catch( e=>console.log(e) );\r\n\r\n\r\nclass ModalAddUpdate extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            open: true,\r\n            dataNew: this.props.data,\r\n            newName: this.props.data && this.props.data.NewName ? this.props.data.NewName : '',\r\n            sortName: this.props.data && this.props.data.NewSortName ? this.props.data.NewSortName : '',\r\n            description: this.props.data && this.props.data.NewDescription ? this.props.data.NewDescription : '',\r\n            newBody: this.props.data && this.props.data.NewBody ? this.props.data.NewBody : '',\r\n            count: this.props.data && this.props.data.Count ? this.props.data.Count : 1,\r\n            isHotNew: this.props.data.IsHotNew && this.props.IsHotNew ? this.props.IsHotNew : true,\r\n            newTag: this.props.data && this.props.data.NewTag ? this.props.data.NewTag : null,\r\n            image: this.props.data && this.props.data.NewImage ? this.props.data.NewImage : ' ',\r\n            imageName: '',\r\n            newCategory: this.props.data && this.props.data.NewCategoryId ? this.props.data.NewCategoryId : '',\r\n            listCategory: [],\r\n            imagePreviewUrl: '',\r\n            imageFake:''\r\n\r\n        }\r\n        this.data = JSON.stringify(this.props.data);\r\n        this.data2 = this.props.data;\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.getNewCategory()\r\n    }\r\n\r\n    getNewCategory() {\r\n        newCategoryProvider.getAll().then(res => {\r\n            this.setState({\r\n                listCategory: res.Data\r\n            })\r\n        }).catch(e => {\r\n            console.log(e)\r\n        })\r\n    }\r\n\r\n\r\n    handleImageChange = (e) => {\r\n        this.setState({\r\n            image: e.target.files[0],\r\n            imageName: e.target.files[0].name,\r\n            imageFake: URL.createObjectURL(e.target.files[0])\r\n        })\r\n       \r\n    };\r\n\r\n\r\n    _handleImageChange(e) {\r\n        e.preventDefault();\r\n\r\n        // Assuming only image\r\n        // Assuming only image\r\n        this.setState({\r\n            image: URL.createObjectURL(e.target.files[0])\r\n          })// Would see a path?\r\n        // TODO: concat files // Would see a path?\r\n        // TODO: concat files\r\n    }\r\n\r\n\r\n    handleClose = () => {\r\n        this.props.callbackOff()\r\n    };\r\n\r\n    create = () => {\r\n        const { dataNew, newName, sortName, description, newBody, count, newTag, image } = this.state;\r\n        let id = dataNew ? dataNew.NewId : '';\r\n        let formData = new FormData();\r\n        formData.append(\"NewId\", this.state.dataNew.NewId)\r\n        formData.append('NewCategoryId', this.state.newCategory)\r\n        formData.append('NewName', this.state.newName)\r\n        formData.append('NewDescription', this.state.description)\r\n        formData.append('NewBody', this.state.newBody)\r\n        formData.append('Count', this.state.count)\r\n        formData.append('IsHotNew', this.state.isHotNew)\r\n        formData.append('NewTag', this.state.newTag)\r\n        formData.append('image', this.state.image)\r\n\r\n        if (dataNew && dataNew.NewId) {\r\n            axios({\r\n                url: \"https://localhost:44334/api/News/update\",\r\n                method: 'PUT',\r\n                data: formData,\r\n                headers: {\r\n                    Accept: 'application/json',\r\n                    'Content-Type': 'multipart/form-data',\r\n                    // 'Authorization': 'Basic YnJva2VyOmJyb2tlcl8xMjM='\r\n                }\r\n            })\r\n                .then(res => {\r\n                    console.log(res)\r\n                    if (res.data.Code == 200) {\r\n                        toast.success(\"Cập nhật tin tức thành công\", {\r\n                            position: toast.POSITION.TOP_RIGHT\r\n                        })\r\n                        this.handleClose();\r\n                    }\r\n                })\r\n                .catch(e => {\r\n                    toast.error(\"Cập nhật tin tức không thành công!\", {\r\n                        position: toast.POSITION.TOP_RIGHT\r\n                    })\r\n                    this.handleClose()\r\n                })\r\n        } else {\r\n\r\n            axios({\r\n                url: \"https://localhost:44334/api/News/create\",\r\n                method: 'POST',\r\n                data: formData,\r\n                headers: {\r\n                    Accept: 'application/json',\r\n                    'Content-Type': 'multipart/form-data',\r\n                    // 'Authorization': 'Basic YnJva2VyOmJyb2tlcl8xMjM='\r\n                }\r\n            })\r\n                .then(res => {\r\n                    console.log(res)\r\n                    if (res.data.Code == 200) {\r\n                        toast.success(\"Tạo mới tin tức thành công\", {\r\n                            position: toast.POSITION.TOP_RIGHT\r\n                        })\r\n                        this.handleClose();\r\n                    }\r\n                })\r\n                .catch(e => {\r\n                    toast.error(\"Tạo mới tin tức không thành công!\", {\r\n                        position: toast.POSITION.TOP_RIGHT\r\n                    })\r\n                    this.handleClose()\r\n                })\r\n        }\r\n\r\n    }\r\n\r\n\r\n\r\n    render() {\r\n        console.log(this.props.data.NewImage)\r\n        const { classes } = this.props\r\n        const { dataNew, newCategory, newName, sortName, description, newBody, image, count, isHotNew, newTag } = this.state\r\n        return (\r\n\r\n            <Dialog open={this.state.open}\r\n                TransitionComponent={Transition}\r\n                keepMounted\r\n                onClose={this.handleClose}\r\n                fullWidth=\"md\"\r\n                maxWidth=\"md\"\r\n            >\r\n                <ValidatorForm onSubmit={this.create}>\r\n                    {/* <DialogTitle>{content}</DialogTitle> */}\r\n                    <DialogTitle> {this.props.data.NewId ? 'Cập nhật tin tức ' : 'Thêm mới tin tức'}</DialogTitle>\r\n                    <DialogContent>\r\n                        <Grid container>\r\n                            <Grid item xs={12} md={3}>Tên tin tức(*)</Grid>\r\n                            <Grid item xs={12} md={9}>\r\n                                <TextValidator\r\n                                    value={newName}\r\n                                    placeholder=\"Nhập tên tin tức\"\r\n                                    className={classes.textField}\r\n                                    validators={[\"required\"]}\r\n                                    errorMessages={['Tên tin tức không được bỏ trống!']}\r\n                                    onChange={(event) => {\r\n                                        this.data2.newName = event.target.value;\r\n                                        this.setState({ newName: event.target.value });\r\n                                    }}\r\n                                />\r\n                            </Grid>\r\n\r\n                            <Grid item xs={12} md={3}>Loại tin tức(*)</Grid>\r\n                            <Grid item xs={12} md={9}>\r\n                                <SelectValidator\r\n                                    value={newCategory}\r\n                                    className={classes.textField}\r\n                                    validators={[\"required\"]}\r\n                                    errorMessages={['Loại tin tức không được bỏ trống!']}\r\n                                    onChange={(event) => {\r\n                                        this.data2.newCategory = event.target.value;\r\n                                        this.setState({ newCategory: event.target.value });\r\n                                    }}\r\n\r\n                                >\r\n                                    {this.state.listCategory.map((item, index) => {\r\n                                        return (\r\n                                            <MenuItem key={index} value={item.NewCategoryId}>{item.NewCategoryName}</MenuItem>\r\n                                        )\r\n\r\n                                    })}\r\n\r\n\r\n\r\n                                </SelectValidator>\r\n                            </Grid>\r\n\r\n                            <Grid item xs={12} md={3}>Hình ảnh(*)</Grid>\r\n                            <Grid item xs={12} md={9}>\r\n                                <input\r\n                                    accept=\"image/png, image/jpeg\"\r\n                                    className={classes.input}\r\n                                    style={{ display: 'none' }}\r\n                                    placeholder=\"chọn ảnh\"\r\n                                    id=\"upload_logo_header\"\r\n                                    onChange={(e)=>this.handleImageChange(e)}\r\n                                    type=\"file\"\r\n                                    // value={this.state.image}\r\n                                />\r\n                                <label htmlFor=\"upload_logo_header\" style={{ marginLeft: '-3%' }}>\r\n                                    <Button component=\"span\">\r\n                                        <img style={{ width: 30, margin: 'auto', border: \"1px soild\" }}\r\n                                            src=\"/image-icon.png\" />\r\n                                    </Button>\r\n                                </label>\r\n                                {/* {this.props.data.NewImage? <img style={{width:100, height:100}} src={resource_url+this.state.image}/>:\r\n                                    \r\n                                } */}\r\n                                 <img style={{width:100, height:100}} src={this.state.imageFake}/>\r\n                                    \r\n                                {/* <div className='input-image'>{this.state.image}</div> */}\r\n                            </Grid>\r\n                            <Grid item xs={12} md={3}>Mô tả</Grid>\r\n                            <Grid item xs={12} md={9}>\r\n                                <TextValidator\r\n                                    value={description}\r\n                                    placeholder=\"Nhập mô tả\"\r\n                                    className={classes.textField}\r\n                                    onChange={(event) => {\r\n                                        this.data2.description = event.target.value;\r\n                                        this.setState({ description: event.target.value })\r\n                                    }}\r\n                                    validators={['required']}\r\n                                    errorMessages={['Mô tả không được để trống']}\r\n                                />\r\n                            </Grid>\r\n\r\n                            <Grid item xs={12} md={3}>Tag</Grid>\r\n                            <Grid item xs={12} md={9}>\r\n                                <TextValidator\r\n                                    value={newTag}\r\n                                    placeholder=\"tag\"\r\n                                    className={classes.textField}\r\n                                    onChange={(event) => {\r\n                                        this.data2.newTag = event.target.value;\r\n                                        this.setState({ newTag: event.target.value })\r\n                                    }}\r\n                                    validators={['required']}\r\n                                    errorMessages={['Tag không được để trống']}\r\n                                />\r\n                            </Grid>\r\n\r\n                            <Grid item xs={12} md={3}>Nội dung</Grid>\r\n                            <Grid item xs={12} md={9}>\r\n                                <CKEditor\r\n                                    data={newBody}\r\n                                    editor={ClassicEditor}\r\n\r\n                                    config={{ckfinder: {\r\n                                        // Upload the images to the server using the CKFinder QuickUpload command.\r\n                                        // uploadUrl: 'https://44400.cke-cs.com/easyimage/upload/'\r\n                                        uploadUrl: 'https://localhost:44334/Uploads/'\r\n                                      }}}\r\n\r\n                                    onChange={(event, editor) => {\r\n                                        const data = editor.getData();\r\n                                        console.log({ event, editor, data });\r\n                                        this.setState({ newBody: data })\r\n                                    }}\r\n\r\n                                />\r\n                            </Grid>\r\n                        </Grid>\r\n\r\n                    </DialogContent>\r\n                    <DialogActions>\r\n                        <Button onClick={this.handleClose} variant=\"contained\" color=\"inherit\">Cancel</Button>\r\n                        {\r\n                            this.data != JSON.stringify(this.data2) ?\r\n                                <Button variant=\"contained\" color=\"primary\" type=\"submit\">Ok</Button> :\r\n                                <Button variant=\"contained\" color=\"primary\" disabled>Ok</Button>\r\n                        }\r\n                    </DialogActions>\r\n                </ValidatorForm>\r\n            </Dialog >\r\n        )\r\n    }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n    return {\r\n        userApp: state.userApp\r\n    };\r\n}\r\n\r\n\r\nconst styles = theme => ({\r\n    row: {\r\n        display: 'flex',\r\n        justifyContent: 'center',\r\n    }, textField: {\r\n        width: '100%'\r\n    }, avatar: {\r\n        margin: 10,\r\n    }, bigAvatar: {\r\n        width: 60,\r\n        height: 60,\r\n    }, helpBlock: {\r\n        color: 'red',\r\n    },\r\n    textRight: {\r\n        float: 'right'\r\n    }\r\n});\r\nexport default withStyles(styles)(connect(mapStateToProps)(ModalAddUpdate));"]},"metadata":{},"sourceType":"module"}